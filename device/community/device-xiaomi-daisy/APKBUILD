# Maintainer: Alejandro Tafalla <alikates@dnyon.com>
# Reference: <https://postmarketos.org/devicepkg>
pkgname=device-xiaomi-daisy
pkgdesc="Xiaomi Mi A2 Lite"
pkgver=11
pkgrel=2
url="https://postmarketos.org"
license="MIT"
arch="aarch64"
options="!check !archcheck"
depends="
	firmware-qcom-adreno-a530
	firmware-xiaomi-daisy
	linux-postmarketos-qcom-msm8953
	lk2nd-msm8953
	mkbootimg
	msm-firmware-loader
	postmarketos-base
	qbootctl
	soc-qcom-msm8953
	soc-qcom-msm8953-modem
"
makedepends="devicepkg-dev"
subpackages="$pkgname-fake-goodix:fake_goodix"

source="
	deviceinfo
	modules-initfs
	90-device-xiaomi-daisy.rules
"

build() {
	devicepkg_build $startdir $pkgname
}

package() {
	devicepkg_package $startdir $pkgname
}

fake_goodix() {
	pkgdesc="Calibration data for replacement goodix touch controllers"
	install -Dm644 90-device-xiaomi-daisy.rules -t "$subpkgdir/etc/udev/rules.d/"
}

sha512sums="
493e74847984e51c4f788f1272351571411ba21dea6c3ad1fd2d669271e197bd6f55a8720e97c00480a30dd2803515384fe55362c90c5800fe8ef51f6c7c5521  deviceinfo
7202f0a55dfe43348940412fc38e59c855594b070db8742419feadb2299086d5810107201a228b7137b7cc7a97c94afac95d81c0cd65c52f31dbcb619b0a4279  modules-initfs
a2608b01b7b6e2dade694af355ff4f0f26cad49cf54bc332c77eb75d19fdc985f7f996fedb72753de447be0391deabf5fcea52406791d1e6e0d165703b63f145  90-device-xiaomi-daisy.rules
"
